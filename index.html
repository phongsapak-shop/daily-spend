<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Daily Spend</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#10b981">
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>



  <!-- QuaggaJS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
</head>

<body class="bg-gray-900 text-white min-h-screen flex justify-center">

<div class="w-full max-w-md p-6 space-y-6">

  <h1 class="text-2xl font-bold text-center">üí∏ ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ</h1>
  <p id="total" class="text-4xl font-extrabold text-center text-green-400">0 ‡∏ö‡∏≤‡∏ó</p>

  <!-- BUTTONS -->
  <div class="grid grid-cols-2 gap-3">
    <button onclick="startScanner()"
      class="bg-blue-500 text-black font-bold p-3 rounded text-lg">
      üì∑ ‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î
    </button>

    <button onclick="addExpense()"
      class="bg-green-500 text-black font-bold p-3 rounded text-lg">
      + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢
    </button>
  </div>

  <!-- INPUT -->
  <div class="space-y-3">
    <input id="amount" type="number" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô"
      class="w-full p-3 rounded bg-gray-800 text-white text-lg">

    <select id="category"
      class="w-full p-3 rounded bg-gray-800 text-white text-lg">
      <option value="üçú ‡∏≠‡∏≤‡∏´‡∏≤‡∏£">üçú ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
      <option value="üöó ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á">üöó ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</option>
      <option value="‚òï ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">‚òï ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</option>
      <option value="üì¶ ‡∏≠‡∏∑‡πà‡∏ô‡πÜ">üì¶ ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
    </select>
  </div>

  <!-- SCANNER -->
  <div id="scanner" class="hidden">
    <div id="camera" class="rounded overflow-hidden"></div>
    <button onclick="stopScanner()"
      class="mt-2 w-full bg-red-500 text-black p-2 rounded">
      ‚ùå ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á
    </button>
  </div>

  <!-- LIST -->
  <ul id="list" class="space-y-2 text-sm"></ul>

</div>

<script>
  <script>
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDCnRL9p7Nqsl6Ch9FgwbxZcNPDaVr0SPE",
  authDomain: "daily-spend-15913.firebaseapp.com",
  projectId: "daily-spend-15913",
  storageBucket: "daily-spend-15913.firebasestorage.app",
  messagingSenderId: "746810840466",
  appId: "1:746810840466:web:cda3733e926010bad6dd4b",
  measurementId: "G-80W2W4RPNL"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
</script>

let expenses = JSON.parse(localStorage.getItem("expenses")) || [];

function addExpense() {
  const amount = document.getElementById("amount").value;
  const category = document.getElementById("category").value;
  if (!amount) return;

  expenses.push({
    id: Date.now(),
    amount: Number(amount),
    category,
    date: new Date().toDateString()
  });

  localStorage.setItem("expenses", JSON.stringify(expenses));
  document.getElementById("amount").value = "";
  render();
}

function deleteExpense(id) {
  expenses = expenses.filter(e => e.id !== id);
  localStorage.setItem("expenses", JSON.stringify(expenses));
  render();
}

function render() {
  const today = new Date().toDateString();
  const todayExpenses = expenses.filter(e => e.date === today);

  let total = 0;
  document.getElementById("list").innerHTML = "";

  todayExpenses.forEach(e => {
    total += e.amount;
    document.getElementById("list").innerHTML += `
      <li class="bg-gray-800 p-2 rounded flex justify-between items-center">
        <span>${e.category}</span>
        <span>
          ${e.amount} ‡∏ö‡∏≤‡∏ó
          <button onclick="deleteExpense(${e.id})" class="text-red-400 ml-2">‚úñ</button>
        </span>
      </li>
    `;
  });

  document.getElementById("total").innerText = total + " ‡∏ö‡∏≤‡∏ó";
}

render();


// ===== BARCODE =====
function startScanner() {
  document.getElementById("scanner").classList.remove("hidden");

  Quagga.init({
    inputStream: {
      name: "Live",
      type: "LiveStream",
      target: document.querySelector('#camera'),
      constraints: {
        facingMode: "environment"
      }
    },
    decoder: {
      readers: ["ean_reader", "ean_8_reader", "upc_reader"]
    }
  }, function(err) {
    if (err) {
      alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ");
      return;
    }
    Quagga.start();
  });

  Quagga.onDetected(function(result) {
    const code = result.codeResult.code;
    stopScanner();

    // ‡πÄ‡∏î‡∏≤‡∏´‡∏°‡∏ß‡∏î‡∏à‡∏≤‡∏Å‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î (‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô)
    document.getElementById("category").value = "üçú ‡∏≠‡∏≤‡∏´‡∏≤‡∏£";
    alert("‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à\nBarcode: " + code + "\n‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢");
  });
}

function stopScanner() {
  Quagga.stop();
  document.getElementById("scanner").classList.add("hidden");
}
</script>

</body>
</html>




