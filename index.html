<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Expense Tracker</title>

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      min-height: 100vh;
      overflow-x: hidden;
      padding-bottom: 90px; /* ‡∏Å‡∏±‡∏ô‡πÇ‡∏î‡∏ô‡πÅ‡∏ñ‡∏ö‡∏•‡πà‡∏≤‡∏á */
    }

    .container {
      max-width: 420px;
      margin: 0 auto;
      padding: 16px;
    }

    .card {
      background: #fff;
      border-radius: 20px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      width: 100%;
    }

    h2 {
      margin-top: 0;
      margin-bottom: 12px;
    }

    label {
      font-size: 14px;
      color: #555;
    }

    input, select, button {
      width: 100%;
      padding: 12px;
      margin-top: 6px;
      margin-bottom: 12px;
      border-radius: 12px;
      border: 1px solid #ddd;
      font-size: 16px;
    }

    button {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
    }

    button:active {
      transform: scale(0.97);
    }

    img {
      max-width: 100%;
      border-radius: 12px;
      display: none;
      margin-bottom: 12px;
    }

    /* ===== Budget Display (Bottom Fixed) ===== */
    .budget-fixed {
      position: fixed;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      width: calc(100% - 32px);
      max-width: 420px;
      z-index: 1000;
    }

    .budget-display {
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      background: #fff;
      padding: 14px 16px;
      border-radius: 999px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    }

    .budget-green { color: #2ecc71; }
    .budget-yellow { color: #f1c40f; }
    .budget-red { color: #e74c3c; }
  </style>
</head>

<body>

  <div class="container">

    <!-- ‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö -->
    <div class="card">
      <h2>üéØ ‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</h2>
      <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</label>
      <input type="number" id="budgetAmount" placeholder="‡πÄ‡∏ä‡πà‡∏ô 500" />

      <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏ö</label>
      <select id="budgetType">
        <option value="daily">‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</option>
        <option value="weekly">‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</option>
        <option value="monthly">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
      </select>

      <button onclick="saveBudget()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏ö</button>
    </div>

    <!-- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ -->
    <div class="card">
      <h2>üßæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</h2>

      <label>‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏∞‡πÑ‡∏£</label>
      <input type="text" id="expenseName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°" />

      <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
      <input type="number" id="expenseAmount" placeholder="‡πÄ‡∏ä‡πà‡∏ô 20" />

      <label>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
      <select id="expenseCategory">
        <option>‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
        <option>‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</option>
        <option>‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ</option>
        <option>‡∏≠‡∏∑‡πà‡∏ô ‡πÜ</option>
      </select>

      <label>‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ</label>
      <input type="file" accept="image/*" id="photoInput" />
      <img id="preview" />

      <button onclick="saveExpense()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </div>

  </div>

  <!-- ‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î) -->
  <div class="budget-fixed">
    <div id="budgetDisplay" class="budget-display">
      ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö
    </div>
  </div>

<script>
  let budget = JSON.parse(localStorage.getItem('budget')) || null;
  let spent = Number(localStorage.getItem('spent')) || 0;

  const display = document.getElementById('budgetDisplay');

  function updateDisplay() {
    if (!budget) {
      display.textContent = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö';
      display.className = 'budget-display';
      return;
    }

    const remaining = budget.amount - spent;
    const ratio = remaining / budget.amount;

    let color = 'budget-green';
    if (ratio < 0.3) color = 'budget-red';
    else if (ratio < 0.6) color = 'budget-yellow';

    display.className = 'budget-display ' + color;
    display.textContent = `‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${remaining} ‡∏ö‡∏≤‡∏ó (${budget.type})`;
  }

  function saveBudget() {
    const amount = Number(document.getElementById('budgetAmount').value);
    const type = document.getElementById('budgetType').value;

    if (!amount) {
      alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô');
      return;
    }

    budget = {
      amount,
      type,
      start: Date.now()
    };

    spent = 0;
    localStorage.setItem('budget', JSON.stringify(budget));
    localStorage.setItem('spent', spent);
    updateDisplay();
  }

  function saveExpense() {
    const name = document.getElementById('expenseName').value;
    const amount = Number(document.getElementById('expenseAmount').value);

    if (!name || !amount) {
      alert('‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö');
      return;
    }

    spent += amount;
    localStorage.setItem('spent', spent);
    updateDisplay();

    document.getElementById('expenseName').value = '';
    document.getElementById('expenseAmount').value = '';
    document.getElementById('photoInput').value = '';
    document.getElementById('preview').style.display = 'none';
  }

  document.getElementById('photoInput').addEventListener('change', e => {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = () => {
      const img = document.getElementById('preview');
      img.src = reader.result;
      img.style.display = 'block';
    };
    reader.readAsDataURL(file);
  });

  updateDisplay();
</script>

</body>
</html>
